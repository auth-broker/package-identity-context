{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/login":{"get":{"tags":["Auth"],"summary":"Get Login Url","description":"Build an OIDC authorize URL (Standard or PKCE) using the shared auth client.\n\nIf PKCE, a fresh verifier/challenge is generated and (optionally) persisted to cache keyed by `state`.","operationId":"get_login_url_login_get","parameters":[{"name":"scope","in":"query","required":false,"schema":{"type":"string","default":"openid email profile","title":"Scope"}},{"name":"response_type","in":"query","required":false,"schema":{"type":"string","default":"code","title":"Response Type"}},{"name":"identity_provider","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"Google","title":"Identity Provider"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/OAuth2AuthorizeResponse"},{"$ref":"#/components/schemas/PKCEAuthorizeResponse"}],"title":"Response Get Login Url Login Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/callback":{"get":{"tags":["Auth"],"summary":"Callback","description":"Exchange the authorization code for tokens using the full redirect URL.\n\nFor PKCE, the verifier is auto-fetched from cache via `state` (or falls back to the verifier\nincluded in the /login response if the caller passes it back).","operationId":"callback_callback_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuth2Token"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"OAuth2AuthorizeResponse":{"properties":{"url":{"type":"string","minLength":1,"format":"uri","title":"Url"},"state":{"type":"string","title":"State"}},"type":"object","required":["url","state"],"title":"OAuth2AuthorizeResponse"},"OAuth2Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"id_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id Token"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"},"expires_in":{"type":"integer","title":"Expires In"},"scope":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scope"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","expires_in","token_type"],"title":"OAuth2Token"},"PKCEAuthorizeResponse":{"properties":{"url":{"type":"string","minLength":1,"format":"uri","title":"Url"},"state":{"type":"string","title":"State"},"code_verifier":{"type":"string","title":"Code Verifier"},"code_challenge":{"type":"string","title":"Code Challenge"},"code_challenge_method":{"type":"string","title":"Code Challenge Method"}},"type":"object","required":["url","state","code_verifier","code_challenge","code_challenge_method"],"title":"PKCEAuthorizeResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}